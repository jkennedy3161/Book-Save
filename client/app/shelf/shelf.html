<div ng-controller="LandingController" ng-init="userId()">
  <nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <span class="navbar-brand message">Hi {{ user.username }}</span>
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">Book Save</a>
    </div>
      <div id="navbar" class="navbar-collapse collapse">
        <a href="/#!/landing"><button class="btn btn-primary">Search</button></a>
        <a href="/#!/shelf"><button class="btn btn-primary">Shelf</button></a>
        <button type="submit" ng-click="signout()" class="btn btn-primary">Log Out</button>
        <a onclick="scroll(0,0)"><button type="button" class="btn btn-primary" data-toggle="collapse" data-target="#cart" aria-expanded="false" aria-controls="cart">Shopping Cart </button></a>
    </div>
  </div>
</nav>
<div ng-controller="ShelfController">
  <div class="border">
  <div id="cart" class="collapse">
    <div class="row window">
      <ul ng-repeat="book in cart track by $index">
        <li>{{ book.title }}</li>
      </ul></div>
      <div class="row cart-display">
        <h5>Total items: {{ cart.length }}</h5>
        <h5>Total price: ${{ roundedPrice }}</h5>
      </div>
      <button data-toggle="modal" data-target="#myModal" ng-show="cart.length > 0" ng-hide="!checkout" class="btn btn-primary cart-display" ng-click="fakeBuy()">
      Checkout
      </button>
      </div>
    </div>
      <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title" id="myModalLabel">Payment</h4>
            </div>
            <div class="modal-body">
            <form stripe-form="stripeCallback" name="credit">
            <div class="form-group">
              <input class="form-control" payments-format="card"  name="name" ng-model="name" placeholder="John Smith">
              <input class="form-control" payments-format="card"  name="address_line1" ng-model="address_line1" payments-format="address_line1" placeholder="123 Apple St">
              <input class="form-control" payments-format="card"  name="address_city" ng-model="address_city" payments-format="address_city" placeholder="Los Angeles">
              <input class="form-control" payments-format="card"  name="address_state" ng-model="address_state" payments-format="address_state" placeholder="California">
              <input class="form-control" payments-format="card"  name="address_zip" ng-model="address_zip" payments-format="address_zip" placeholder="90030">
              <input class="form-control" payments-format="card"  name="address_country" ng-model="address_country" payments-format="address_country" placeholder="United States">
            </div>
            <div class="form-group">
                <input class="form-control" ng-model="number" placeholder="Card Number"
                         payments-format="card" payments-validate="card" name="card" required />
                <input class="form-control" ng-model="expiry" placeholder="Expiration"
                         payments-format="expiry" payments-validate="expiry"
                         name="expiry" required/>
                <input class="form-control" ng-model="cvc" placeholder="CVC" payments-format="cvc" payments-validate="cvc" name="cvc" required/>
                <div class="modal-footer">
                  <button class="btn btn-success" ng-disabled="alert" type="submit">Submit</button>
                </div>
            </div>
            </form>
            </div>
          </div>
        </div>
    </div>



      <!-- stripe form-->
  <div class="container shelf" ng-init="getShelf()">
    <h2>Shelf</h2>
    <div class="row">
      <div class="col-md-2 shelfImage" ng-repeat="collection in collections track by $index">
        <a class="select" href="#!/details/{{collection._id}}"><img ng-src="{{ collection.smallThumbnail }}"></a>
        <button ng-click="addToCart(collection)" class="shelfbtn btn btn-primary">Save to Cart</button>
        <button ng-click="removeBook(collection._id)" class="shelfbtn btn btn-primary">Remove from Shelf</button>
        <h6>${{ collection.price }}</h6>
      </div>
      </div>
    </div>
    <div ng-show="alert" class="savedBook navbar-fixed-bottom alert alert-success alert-dismissable fade in" role="alert">
    <a href="/#!/landing" class="close" aria-label="close">&times;</a>
      <strong>Success! </strong>{{ alert }}
    </div>
  </div>
</div>